{"version":3,"sources":["js/main.js"],"names":["result","document","querySelector","previousOperandText","currentOperandText","calcPad","ResultFontSize","parseFloat","defaultView","getComputedStyle","fontSize","PrevFontSize","InputFontSize","maxDigits","Calculator","currentOperand","previousOperand","operation","undefined","resulting","expression","showResult","innerText","checkWidthOverflow","clearAll","computePercent","includes","x","eval","appendNumber","number","length","toString","deleteDigit","slice","calculator","updateDisplay","reverse","replace","chooseOperation","compute","computation","prev","current","isNaN","lastOperation","highlightBtn","place","eventBGcolor","style","background","setTimeout","fz","CurrentFontSize","clientWidth","setInterval","window","addEventListener","location","reload","event","eventTarget","key","match","keyCode","eventValue","target","value","className"],"mappings":"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","file":"main.65e24ecb.js","sourceRoot":"..\\source","sourcesContent":["let result = document.querySelector('.calc-display--result'),\r\n    previousOperandText = document.querySelector('.calc-display--operation'),\r\n    currentOperandText = document.querySelector('.calc-display--input'),\r\n    calcPad = document.querySelector('.calc-pad');\r\n\r\nconst ResultFontSize = parseFloat(document.defaultView.getComputedStyle(result).fontSize);\r\nconst PrevFontSize = parseFloat(document.defaultView.getComputedStyle(previousOperandText).fontSize);\r\nconst InputFontSize = parseFloat(document.defaultView.getComputedStyle(currentOperandText).fontSize);\r\n\r\nconst maxDigits = 10;\r\n\r\n//#region Functions\r\nfunction Calculator(previousOperandText, currentOperandText, result) {\r\n    this.previousOperandText = previousOperandText;\r\n    this.currentOperandText = currentOperandText;\r\n    this.result = result;\r\n\r\n    this.currentOperand = '';\r\n    this.previousOperand = '';\r\n    this.operation = undefined;\r\n    this.resulting = '';\r\n    this.expression = '';\r\n\r\n    this.showResult = function () {\r\n        if (!this.currentOperand) return;\r\n        this.previousOperandText.innerText = `${this.expression}${this.currentOperand} `;\r\n        this.currentOperandText.innerText = '';\r\n        this.result.innerText = this.resulting;\r\n        this.currentOperand = '';\r\n\r\n        checkWidthOverflow(currentOperandText, InputFontSize);\r\n        checkWidthOverflow(previousOperandText, PrevFontSize);\r\n        checkWidthOverflow(result, ResultFontSize);\r\n    };\r\n\r\n    this.clearAll = function () {\r\n        this.currentOperand = '';\r\n        this.previousOperand = '';\r\n        this.operation = undefined;\r\n        this.resulting = '';\r\n    };\r\n\r\n    this.computePercent = function () {\r\n        if (!this.currentOperand) return;\r\n        this.previousOperandText.innerText = `${this.expression}${this.currentOperand}%`;\r\n        this.currentOperandText.innerText = '';\r\n        if (this.previousOperandText.innerText.includes('×')) this.operation = '*';\r\n        if (this.previousOperandText.innerText.includes('÷')) this.operation = '/';\r\n\r\n        this.x = eval(\r\n            parseFloat(this.expression) +\r\n                this.operation +\r\n                (parseFloat(this.expression) / 100) *\r\n                    parseFloat(this.currentOperand)\r\n        );\r\n        this.result.innerText = this.x;\r\n        this.currentOperand = '';\r\n        checkWidthOverflow(result, ResultFontSize);\r\n        checkWidthOverflow(previousOperandText, PrevFontSize);\r\n    };\r\n\r\n    this.appendNumber = function (number) {\r\n        this.resulting = '';\r\n        this.result.innerText = this.resulting;\r\n        if (number === '.' && this.currentOperand.includes('.')) return;\r\n        if (this.currentOperand === '0' && number === '0') return;\r\n        if (this.currentOperand.length <= maxDigits) {\r\n            if (number === '.' && !this.currentOperand) { this.currentOperand = '0' }\r\n            this.currentOperand += number.toString();\r\n        }\r\n    };\r\n\r\n    this.deleteDigit = function () {\r\n        if (this.currentOperand.length > 0) {\r\n            this.currentOperand = this.currentOperand.slice(0,length-1);\r\n            calculator.updateDisplay();\r\n        }\r\n    }\r\n\r\n    this.reverse = function () {\r\n        if (this.currentOperand.includes('-') ) {\r\n            this.currentOperand = this.currentOperand.replace(\"-\", \"\");\r\n        } else if (this.currentOperand) {\r\n            this.currentOperand = '-' + this.currentOperand;\r\n        };\r\n        this.currentOperandText.innerText = this.currentOperand;\r\n    }\r\n\r\n    this.chooseOperation = function (operation) {\r\n        if (this.previousOperand) calculator.compute();\r\n\r\n        if (result.innerText) {\r\n            this.previousOperand = result.innerText + operation;\r\n        } else {\r\n            this.previousOperand = this.currentOperand + operation;\r\n        }\r\n        this.operation = operation;\r\n        this.currentOperand = '';\r\n        this.expression = this.previousOperand;\r\n    };\r\n\r\n    this.compute = function () {\r\n        let computation,\r\n            prev = parseFloat(this.previousOperand),\r\n            current = parseFloat(this.currentOperand);\r\n        if (isNaN(prev) || isNaN(current)) return;\r\n\r\n        if (this.operation == '+') computation = prev + current;\r\n        if (this.operation == '-') computation = prev - current;\r\n        if (this.operation == '×') computation = prev * current;\r\n        if (this.operation == '÷') computation = prev / current;\r\n\r\n        this.resulting = computation;\r\n\r\n        this.operation = undefined;\r\n        this.previousOperand = '';\r\n        this.lastOperation = 0;\r\n    };\r\n\r\n    this.updateDisplay = function () {\r\n        this.currentOperandText.innerText = this.currentOperand;\r\n        this.previousOperandText.innerText = this.previousOperand;\r\n        this.result.innerText = this.resulting;\r\n    };\r\n}\r\n\r\nfunction highlightBtn(place) { // highlights pressed button for 99ms\r\n    if (place) {\r\n    let eventBGcolor = place.style.background;\r\n    place.style.background = '#bbb';\r\n    setTimeout(() => place.style.background = eventBGcolor, 99);\r\n} }\r\n\r\nfunction checkWidthOverflow(place, fz) { // check overflow & make font smaller if needed\r\n    place.style.fontSize = fz + 'px';\r\n    let CurrentFontSize = fz;\r\n    while (calcPad.clientWidth*0.96 < place.clientWidth) {\r\n        CurrentFontSize--;\r\n        place.style.fontSize = CurrentFontSize + 'px';\r\n    }\r\n}\r\n\r\n//#endregion\r\n\r\nsetInterval(() => { // shows 0 if empty input string\r\n    if (!currentOperandText.innerText) currentOperandText.innerText = '0';   \r\n}, 66);\r\n\r\nwindow.addEventListener('resize', () => { location.reload() } ); // reload page on resize/rotate\r\n\r\nlet calculator = new Calculator( previousOperandText, currentOperandText, result );\r\n\r\n//#region Keyboard Listener\r\ndocument.addEventListener('keydown', event => { // keyboard listener\r\n    if (event.key.match(/[1234567890\\*\\+/=%\\.-]/) \r\n        || event.keyCode == 13 || event.keyCode == 27 ) { // changes BG color of pressed button for 99 ms\r\n        let eventTarget;\r\n        if (event.key.match(/[1234567890\\+\\.=%-]/)) {\r\n            eventTarget = calcPad.querySelector(`[value=\"${event.key}\"]`);\r\n        } else if (event.key == '/') {\r\n            eventTarget = calcPad.querySelector(`[value=\"÷\"]`);\r\n        } else if (event.key == '*') {\r\n            eventTarget = calcPad.querySelector(`[value=\"×\"]`);\r\n            this.operation == '×';\r\n        }\r\n        else if (event.keyCode == 13) eventTarget = calcPad.querySelector(`[value=\"=\"]`)\r\n        else if (event.keyCode == 27) eventTarget = calcPad.querySelector(`[value=\"C\"]`)\r\n        highlightBtn(eventTarget);\r\n    };\r\n\r\n    if (event.key == +event.key || event.key == '.' ) { // press digit or . button on keyboard\r\n        calculator.appendNumber( event.key );\r\n        calculator.updateDisplay();\r\n\r\n    } else if (event.key.match(/[\\*\\+/-]/)) { // press +-/* button on keyboard\r\n        if (event.key == '/') calculator.chooseOperation('÷')\r\n        else if (event.key == '*') calculator.chooseOperation('×')\r\n        else calculator.chooseOperation(event.key);\r\n        calculator.updateDisplay();\r\n    \r\n    } else if (event.key == '=' || event.key == 'Enter') { // press = button on keyboard\r\n        calculator.compute();\r\n        calculator.showResult();\r\n    \r\n    } else if (event.key == 'Escape') { // press ESC button on keyboard\r\n        calculator.clearAll();\r\n        calculator.updateDisplay();\r\n    \r\n    } else if (event.key == 'Backspace') { // press Backspace (to delete last digit) on keyboard\r\n        calculator.deleteDigit();\r\n    \r\n    } else if (event.key == '%') { // press % button on keyboard\r\n        calculator.computePercent();\r\n    }\r\n} ); \r\n//#endregion\r\n\r\n//#region (mouse) Clicks Listener\r\ncalcPad.addEventListener('click', event => { // mouse clicks listener\r\n    let eventValue = event.target.value;\r\n\r\n    if (event.target.className.includes('button')) { // changes BG color of clicked button for 99 ms\r\n        highlightBtn(event.target);\r\n    } else return;\r\n\r\n    if (eventValue == +eventValue || eventValue == '.') { // click digit or .\r\n        calculator.appendNumber(eventValue);\r\n        calculator.updateDisplay();\r\n\r\n    } else if (event.target.className.includes('colorOper')) {  // click +-/* button\r\n        calculator.chooseOperation(eventValue);\r\n        calculator.updateDisplay();\r\n\r\n    } else if (eventValue == 'C') { // click C button\r\n        calculator.clearAll();\r\n        calculator.updateDisplay();\r\n\r\n    } else if (eventValue == '%') { // click % button\r\n        calculator.computePercent();\r\n        \r\n    } else if (eventValue == '±') { // click Plus/minus button\r\n        calculator.reverse();\r\n        calculator.updateDisplay();\r\n\r\n    } else if (eventValue == '=') { // click = button\r\n        calculator.compute();\r\n        calculator.showResult();\r\n    }\r\n} );\r\n //#endregion"]}
{"version":3,"sources":["js/main.js"],"names":["result","document","querySelector","previousOperandText","currentOperandText","calcPad","ResultFontSize","parseFloat","defaultView","getComputedStyle","fontSize","PrevFontSize","InputFontSize","maxDigits","Calculator","currentOperand","previousOperand","operation","undefined","resulting","expression","showResult","checkWidthOverflow","place","fz","style","CurrentFontSize","clientWidth","innerText","clearAll","computePercent","includes","x","eval","appendNumber","number","length","toString","deleteDigit","slice","calculator","updateDisplay","reverse","replace","chooseOperation","compute","computation","prev","current","isNaN","lastOperation","highlightBtn","eventBGcolor","background","setTimeout","setInterval","window","addEventListener","location","reload","event","eventTarget","key","match","keyCode","eventValue","target","value","className"],"mappings":"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","file":"main.5bc6b95b.js","sourceRoot":"..\\source","sourcesContent":["let result = document.querySelector('.calc-display--result'),\r\n    previousOperandText = document.querySelector('.calc-display--operation'),\r\n    currentOperandText = document.querySelector('.calc-display--input'),\r\n    calcPad = document.querySelector('.calc-pad');\r\n\r\nconst ResultFontSize = parseFloat(document.defaultView.getComputedStyle(result).fontSize);\r\nconst PrevFontSize = parseFloat(document.defaultView.getComputedStyle(previousOperandText).fontSize);\r\nconst InputFontSize = parseFloat(document.defaultView.getComputedStyle(currentOperandText).fontSize);\r\n\r\nconst maxDigits = 10;\r\n\r\n//#region Functions\r\nfunction Calculator(previousOperandText, currentOperandText, result) {\r\n    this.previousOperandText = previousOperandText;\r\n    this.currentOperandText = currentOperandText;\r\n    this.result = result;\r\n\r\n    this.currentOperand = '';\r\n    this.previousOperand = '';\r\n    this.operation = undefined;\r\n    this.resulting = '';\r\n    this.expression = '';\r\n\r\n    this.showResult = function () {\r\n        if (!this.currentOperand) return;\r\n        this.previousOperandText.innerText = `${this.expression}${this.currentOperand} `;\r\n        this.currentOperandText.innerText = '';\r\n        this.result.innerText = this.resulting;\r\n        this.currentOperand = '';\r\n\r\n        function checkWidthOverflow(place, fz) { // check overflow & make font smaller if needed\r\n            place.style.fontSize = fz + 'px';\r\n            let CurrentFontSize = fz;\r\n            while (calcPad.clientWidth*0.96 < place.clientWidth) {\r\n                CurrentFontSize--;\r\n                place.style.fontSize = CurrentFontSize + 'px';\r\n            }\r\n        } // end of checkWidthOverflow()\r\n\r\n        checkWidthOverflow(currentOperandText, InputFontSize);\r\n        checkWidthOverflow(previousOperandText, PrevFontSize);\r\n        checkWidthOverflow(result, ResultFontSize);\r\n    };\r\n\r\n    this.clearAll = function () {\r\n        this.currentOperand = '';\r\n        this.previousOperand = '';\r\n        this.operation = undefined;\r\n        this.resulting = '';\r\n    };\r\n\r\n    this.computePercent = function () {\r\n        if (!this.currentOperand) return;\r\n        this.previousOperandText.innerText = `${this.expression}${this.currentOperand}%`;\r\n        this.currentOperandText.innerText = '';\r\n        if (this.previousOperandText.innerText.includes('×')) this.operation = '*';\r\n        if (this.previousOperandText.innerText.includes('÷')) this.operation = '/';\r\n\r\n        this.x = eval(\r\n            parseFloat(this.expression) +\r\n                this.operation +\r\n                (parseFloat(this.expression) / 100) *\r\n                    parseFloat(this.currentOperand)\r\n        );\r\n        this.result.innerText = this.x;\r\n        this.currentOperand = '';\r\n    };\r\n\r\n    this.appendNumber = function (number) {\r\n        this.resulting = '';\r\n        this.result.innerText = this.resulting;\r\n        if (number === '.' && this.currentOperand.includes('.')) return;\r\n        if (this.currentOperand === '0' && number === '0') return;\r\n        if (this.currentOperand.length <= maxDigits) {\r\n            if (number === '.' && !this.currentOperand) { this.currentOperand = '0' }\r\n            this.currentOperand += number.toString();\r\n        }\r\n    };\r\n\r\n    this.deleteDigit = function () {\r\n        if (this.currentOperand.length > 0) {\r\n            this.currentOperand = this.currentOperand.slice(0,length-1);\r\n            calculator.updateDisplay();\r\n        }\r\n    }\r\n\r\n    this.reverse = function () {\r\n        if (this.currentOperand.includes('-') ) {\r\n            this.currentOperand = this.currentOperand.replace(\"-\", \"\");\r\n        } else if (this.currentOperand) {\r\n            this.currentOperand = '-' + this.currentOperand;\r\n        };\r\n        this.currentOperandText.innerText = this.currentOperand;\r\n    }\r\n\r\n    this.chooseOperation = function (operation) {\r\n        if (this.previousOperand) calculator.compute();\r\n\r\n        if (result.innerText) {\r\n            this.previousOperand = result.innerText + operation;\r\n        } else {\r\n            this.previousOperand = this.currentOperand + operation;\r\n        }\r\n        this.operation = operation;\r\n        this.currentOperand = '';\r\n        this.expression = this.previousOperand;\r\n    };\r\n\r\n    this.compute = function () {\r\n        let computation,\r\n            prev = parseFloat(this.previousOperand),\r\n            current = parseFloat(this.currentOperand);\r\n        if (isNaN(prev) || isNaN(current)) return;\r\n\r\n        if (this.operation == '+') computation = prev + current;\r\n        if (this.operation == '-') computation = prev - current;\r\n        if (this.operation == '×') computation = prev * current;\r\n        if (this.operation == '÷') computation = prev / current;\r\n\r\n        this.resulting = computation;\r\n\r\n        this.operation = undefined;\r\n        this.previousOperand = '';\r\n        this.lastOperation = 0;\r\n    };\r\n\r\n    this.updateDisplay = function () {\r\n        this.currentOperandText.innerText = this.currentOperand;\r\n        this.previousOperandText.innerText = this.previousOperand;\r\n        this.result.innerText = this.resulting;\r\n    };\r\n}\r\n\r\nfunction highlightBtn(place) { // highlights pressed button for 99ms\r\n    if (place) {\r\n    let eventBGcolor = place.style.background;\r\n    place.style.background = '#bbb';\r\n    setTimeout(() => place.style.background = eventBGcolor, 99);\r\n} }\r\n\r\n//#endregion\r\n\r\nsetInterval(() => { // shows 0 if empty input string\r\n    if (!currentOperandText.innerText) currentOperandText.innerText = '0';   \r\n}, 66);\r\n\r\nwindow.addEventListener('resize', () => { location.reload() } ); // reload page on resize/rotate\r\n\r\nlet calculator = new Calculator( previousOperandText, currentOperandText, result );\r\n\r\n//#region Keyboard Listener\r\ndocument.addEventListener('keydown', event => { // keyboard listener\r\n    if (event.key.match(/[1234567890\\*\\+/=%\\.-]/) \r\n        || event.keyCode == 13 || event.keyCode == 27 ) { // changes BG color of pressed button for 99 ms\r\n        let eventTarget;\r\n        if (event.key.match(/[1234567890\\+\\.=%-]/)) {\r\n            eventTarget = calcPad.querySelector(`[value=\"${event.key}\"]`);\r\n        } else if (event.key == '/') {\r\n            eventTarget = calcPad.querySelector(`[value=\"÷\"]`);\r\n        } else if (event.key == '*') {\r\n            eventTarget = calcPad.querySelector(`[value=\"×\"]`);\r\n            this.operation == '×';\r\n        }\r\n        else if (event.keyCode == 13) eventTarget = calcPad.querySelector(`[value=\"=\"]`)\r\n        else if (event.keyCode == 27) eventTarget = calcPad.querySelector(`[value=\"C\"]`)\r\n        highlightBtn(eventTarget);\r\n    };\r\n\r\n    if (event.key == +event.key || event.key == '.' ) { // press digit or . button on keyboard\r\n        calculator.appendNumber( event.key );\r\n        calculator.updateDisplay();\r\n\r\n    } else if (event.key.match(/[\\*\\+/-]/)) { // press +-/* button on keyboard\r\n        if (event.key == '/') calculator.chooseOperation('÷')\r\n        else if (event.key == '*') calculator.chooseOperation('×')\r\n        else calculator.chooseOperation(event.key);\r\n        calculator.updateDisplay();\r\n    \r\n    } else if (event.key == '=' || event.key == 'Enter') { // press = button on keyboard\r\n        calculator.compute();\r\n        calculator.showResult();\r\n    \r\n    } else if (event.key == 'Escape') { // press ESC button on keyboard\r\n        calculator.clearAll();\r\n        calculator.updateDisplay();\r\n    \r\n    } else if (event.key == 'Backspace') { // press Backspace (to delete last digit) on keyboard\r\n        calculator.deleteDigit();\r\n    \r\n    } else if (event.key == '%') { // press % button on keyboard\r\n        calculator.computePercent();\r\n    }\r\n} ); \r\n//#endregion\r\n\r\n//#region (mouse) Clicks Listener\r\ncalcPad.addEventListener('click', event => { // mouse clicks listener\r\n    let eventValue = event.target.value;\r\n\r\n    if (event.target.className.includes('button')) { // changes BG color of clicked button for 99 ms\r\n        highlightBtn(event.target);\r\n    } else return;\r\n\r\n    if (eventValue == +eventValue || eventValue == '.') { // click digit or .\r\n        calculator.appendNumber(eventValue);\r\n        calculator.updateDisplay();\r\n\r\n    } else if (event.target.className.includes('colorOper')) {  // click +-/* button\r\n        calculator.chooseOperation(eventValue);\r\n        calculator.updateDisplay();\r\n\r\n    } else if (eventValue == 'C') { // click C button\r\n        calculator.clearAll();\r\n        calculator.updateDisplay();\r\n\r\n    } else if (eventValue == '%') { // click % button\r\n        calculator.computePercent();\r\n        \r\n    } else if (eventValue == '±') { // click Plus/minus button\r\n        calculator.reverse();\r\n        calculator.updateDisplay();\r\n\r\n    } else if (eventValue == '=') { // click = button\r\n        calculator.compute();\r\n        calculator.showResult();\r\n    }\r\n} );\r\n //#endregion"]}